<!doctype html>
<html lang="en">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Linking Heroku</title>
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
            integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
        <link href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.7.2/animate.min.css" rel="stylesheet">


        <script src="./style.css"></script>

    </head>

<body>

    <script src="https://www.gstatic.com/firebasejs/7.6.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.6.0/firebase-analytics.js"></script>




    <h1>Live-updating Tree View</h1>


    <div class="row">
        <div class="col-3">
            <div class="nav flex-column nav-pills" id="v-pills-tab" role="tablist" aria-orientation="vertical">
                <a class="nav-link active" id="v-pills-home-tab" data-toggle="pill" href="#v-pills-home" role="tab"
                    aria-controls="v-pills-home" aria-selected="false">Home</a>
                <a class="nav-link" id="v-pills-profile-tab" data-toggle="pill" href="#v-pills-profile" role="tab"
                    aria-controls="v-pills-profile" aria-selected="false">Edit</a>
                <a class="nav-link" id="v-pills-settings-tab" data-toggle="pill" href="#v-pills-settings" role="tab"
                    aria-controls="v-pills-settings" aria-selected="false">About Me</a>
            </div>
        </div>
        <div class="col-9">
            <div class="tab-content" id="v-pills-tabContent">
                <div class="tab-pane fade show active" id="v-pills-home" role="tabpanel"
                    aria-labelledby="v-pills-home-tab">Select your favorite celebrity to see how many fans they
                    currently have in your area.
                </div>
                <div class="tab-pane fade" id="v-pills-profile" role="tabpanel" aria-labelledby="v-pills-profile-tab">
                    Add more fans to a celebrities fanbase, remove or edit the name of each celebrite tab by
                    clicking
                    on their name. Add a new celebrity through the "Add Men" or "Add
                    Women" tabs.</div>
                <div class="tab-pane fade" id="v-pills-settings" role="tabpanel" aria-labelledby="v-pills-settings-tab">
                    Check out my portfolio
                    <a href='https://jackieczhou.github.io/portfolio/' button type="button" class="btn btn-link"
                        style='background-color:none'>here!</a></div>
            </div>
        </div>
    </div>

    <br>

    <ul id="userList"></ul>

    <div id="userDetail">
        <!-- <p >Name :<strong class="detailName"></strong></p> -->
    </div>



    <script>
    var firebaseConfig = {
    apiKey: "AIzaSyBJbH6n92KJxfGCirXHv_VFM0A1GwwZGU0",
    authDomain: "live-tree-16eb2.firebaseapp.com",
    databaseURL: "https://live-tree-16eb2.firebaseio.com",
    projectId: "live-tree-16eb2",
    storageBucket: "live-tree-16eb2.appspot.com",
    messagingSenderId: "1040801579497",
    appId: "1:1040801579497:web:ea0f283b6ed09d53cbcb78",
    measurementId: "G-59GL88Y848"
};


firebase.initializeApp(config);


const dbRef = firebase.database().ref();

const usersRef = dbRef.child('users');
const userListUI = document.getElementById("userList");

usersRef.on("child_added", snap => {

    let user = snap.val();

    let $li = document.createElement("li");
    $li.innerHTML = user.name;
    $li.setAttribute("child-key", snap.key);
    $li.addEventListener("click", userClicked)
    userListUI.append($li);

});


function userClicked(e) {

    var userID = e.target.getAttribute("child-key");

    const userRef = dbRef.child('users/' + userID);
    const userDetailUI = document.getElementById("userDetail");

    userDetailUI.innerHTML = ""

    userRef.on("child_added", snap => {


        var $p = document.createElement("p");
        $p.innerHTML = snap.key + " - " + snap.val()
        userDetailUI.append($p);


    });

}


    </script>

    <style>
        body,
        h1,
        h2 {
            margin: 0;
            padding: 0;
        }

        body {
            background: #039be5;
            font-family: Arial, sans-serif;
        }

        h1 {
            padding: 10px;
            background: #ffcc00;
        }

        /*---------------------------*/
        /* Read Users */
        /*---------------------------*/
        #userList {
            margin: 0;
            padding: 0;
            width: 200px;
            float: left;
            margin: 10px;
            border: 1px solid #4fc3fc;
        }

        #userList h2 {
            padding: 10px;
            margin: 0;
            color: white;
        }

        #userList li {
            padding: 5px 10px;
            border-top: 1px solid #4fc3fc;
            cursor: pointer;
            color: white;
            font-style: italic;
        }

        #userList li:hover {
            background: #4fc3fc;
        }

        #userDetail {
            float: left;
            width: 200px;
            margin: 10px;
            margin-left: 0;
            padding: 10px;
            border: 1px solid #4fc3fc;
            color: white;
        }

        h1 {
            color: rgb(0, 12, 96);
            border: 3px rgb(0, 12, 96) solid;
            font-size: 3em;
            padding: 1em;
            margin: 0.5em;
            text-align: center;
            font-family: sans-serif;
        }


        .nav,
        .nav-pills,
        .form-inline,
        .form,
        .nav-link,
        .dropdown-menu.show {
            margin-left: 100px;
            border: none;
        }

        .nav-link {
            background-color: rgb(4, 4, 89);
            color: white;
        }
    </style>



</body>

<script src="https://www.gstatic.com/firebasejs/7.6.0/firebase-app.js"></script>
<script type="text/javascript" src="app.js"></script>

<script src="https://code.jquery.com/jquery-3.4.1.slim.min.js"
    integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n"
    crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
    integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo"
    crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"
    integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6"
    crossorigin="anonymous"></script>

</html>